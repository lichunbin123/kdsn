<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.usping.kdsn.mapper.MessageMapper">
    <resultMap id="BaseResultMap" type="com.usping.kdsn.bean.Message">
        <!--
          WARNING - @mbg.generated
          This element is automatically generated by MyBatis Generator, do not modify.
          This element was generated on Sat Nov 25 12:44:12 CET 2017.
        -->
        <id column="message_id" jdbcType="INTEGER" property="messageId"/>
        <result column="sender_id" jdbcType="INTEGER" property="senderId"/>
        <result column="receiver_id" jdbcType="INTEGER" property="receiverId"/>
        <result column="message_content" jdbcType="VARCHAR" property="messageContent"/>
        <result column="delivery_status" jdbcType="INTEGER" property="deliveryStatus"/>
        <result column="send_time" jdbcType="INTEGER" property="sendTime"/>
        <result column="sender_account" jdbcType="VARCHAR" property="senderAccount"/>
        <result column="receiver_account" jdbcType="VARCHAR" property="receiverAccount"/>
    </resultMap>
    <sql id="Base_Column_List">
        <!--
          WARNING - @mbg.generated
          This element is automatically generated by MyBatis Generator, do not modify.
          This element was generated on Sat Nov 25 12:44:12 CET 2017.
        -->
        message_id, sender_id, receiver_id, message_content, delivery_status, send_time, sender_account, receiver_account
    </sql>


    <insert id="insertSelective" useGeneratedKeys="true"  keyColumn="message_id" keyProperty="message.messageId">
        <!--SELECT-->
        <!--<include refid="Base_Column_List"/>-->
        <!--FROM news_note-->
        <!--<trim prefix="WHERE" prefixOverrides="and">-->
            <!--<if test="noteId != null">-->
                <!--note_id = #{noteId}-->
            <!--</if>-->
            <!--<if test="newsId != null">-->
                <!--news_id = #{newsId}-->
            <!--</if>-->
            <!--<if test="noteTitle != null">-->
                <!--note_title = #{noteTitle}-->
            <!--</if>-->
            <!--<if test="noteType != null">-->
                <!--note_type = #{noteType}-->
            <!--</if>-->
            <!--<if test="noteScore != null">-->
                <!--note_score = #{noteScore}-->
            <!--</if>-->
            <!--<if test="noteDate != null">-->
                <!--note_date = #{noteDate}-->
            <!--</if>-->
            <!--<if test="userId != null">-->
                <!--user_id = #{userId}-->
            <!--</if>-->
            <!--<if test="refUrl != null">-->
                <!--ref_url = #{refUrl}-->
            <!--</if>-->
            <!--<if test="noteContent != null">-->
                <!--note_content = #{noteContent}-->
            <!--</if>-->
            <!--<if test="publicState != null ">-->
                <!--public_state = #{publicState}-->
            <!--</if>-->


        <!--</trim>-->
        insert into message(
        <include refid="Base_Column_List"/>
        )
        values (
          #{messageId}, #{senderId}, #{receiverId}, #{messageContent}, #{deliveryStatus},#{sendTime}, #{senderAccount}, #{receiverAccount}
        )
    </insert>

    <select id="selectMessageBySenderAndReceiver" resultMap="BaseResultMap">
        select
            <include refid="Base_Column_List"/>
        from
        message
        where sender_account = #{senderAccount}
        and
        receiver_account = #{receiverAccount}
    </select>

</mapper>